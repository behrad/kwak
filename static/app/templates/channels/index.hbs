<div class="message-list">
  {{#each message in controller.subscribed}}
  <div class="row message">
    <div {{bind-attr class=":col-md-12 message.topic.channel.color"}}>
      <span {{bind-attr class=":channel-color message.topic.channel.color"}}><i class="glyphicon glyphicon-tag"></i></span>
      <div class="message-header">
        {{#link-to 'channels.channel' message.topic.channel.id message.topic.channel.name}}
          <span class="channel-name">{{message.topic.channel.name}}</span>
        {{/link-to}}
        &nbsp;»
        {{#link-to 'channels.channel.topic' message.topic.channel.id message.topic.channel.name message.topic.id message.topic.title}}
          <span class="topic-title">{{message.topic.title}}</span>
        {{/link-to}}
        <small class="pull-right text-muted">
          {{format-date message.pubdate}}
        </small>
      </div>
      <div class="message-body">
        <h5>{{message.author.name}}</h5>
        {{{message.contentHtml}}}
      </div>
    </div>
  </div>
  {{/each}}
</div>

<footer class="row">
  <div class="col-xs-12">
    <form {{action 'createMessage' on='submit' id='messageform'}}>
      <div class="input-group input-group-lg">
        {{view "select" content=controllers.channels.subscribed class="form-control" value=channel optionValuePath="content.id" optionLabelPath="content.name"}}
        <span class="input-group-addon">
          &nbsp;»
        </span>
        {{input type="text" id="topic" value=topicTitle placeholder="topic" class="form-control"}}
      </div>
      <div class="form-group">
        {{message-box id="messagebox" class="form-control" value=message}}
      </div>
    </form>
  </div>
</footer>
